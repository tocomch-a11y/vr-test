<!DOCTYPE html>
<html>
<head><title>Mac Sender</title></head>
<body style="background:#1a1a1a; color:white; text-align:center; padding:50px;">
    <h1>Mac Sender (Auto ID)</h1>
    <button id="btn" style="padding:20px; font-size:20px; cursor:pointer;">1. 配信開始 (VB-CABLE)</button>
    <p id="status">Questでページを開くのを待っています...</p>
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
    <script>
        const peer = new Peer('psy-link-stable-mac');
        document.getElementById('btn').onclick = async () => {
            const stream = await navigator.mediaDevices.getUserMedia({ 
                audio: { echoCancellation: false, noiseSuppression: false, autoGainControl: false } 
            });
            // Questへ自動発信
            peer.call('psy-link-stable-quest', stream);
            document.getElementById('status').innerText = "送信中！Questのボタンを押して開始してください";
        };
    </script>
</body>
</html>
